version: 2

sources:
  - name: raw_jaffle_shop
    database: d2qcknnpqfbt4n
    tables:
      - name: stripe
        description: Raw stripe payment data
        columns:
            -   name: id
                tests:
                    - unique
                    - not_null

        loaded_at_field: _batched_at
        freshness:
            warn_after: {count: 12, period: hour}
            error_after: {count: 24, period: hour}


models:
  - name: stg_payments
    description: Payment Table
    columns: 
      - name: payment_id
        description: Primary key for stg_payments
        tests:
          - unique
          - not_null
      - name: orderid
        description: Foreign key to stg_orders.order_id
        tests:
            - not_null
      - name: paymentmethod
        description: payment method
      - name: status
        description: status of the payment record
      - name: amount
        description: Raw value is in cents. Transformed by <val>/100.
      - name: created_at
        description: timestamp of record


